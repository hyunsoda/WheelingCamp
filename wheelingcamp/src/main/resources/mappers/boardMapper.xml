<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="kr.co.wheelingcamp.board.mapper.BoardMapper">

		<select id="getListCount" resultType="_int">
				SELECT COUNT(*) FROM "BOARD"
				WHERE BOARD_DEL_FL = 'N'
		</select>
      
       
        <select id="selectBoardList">
        	
        	  SELECT ROWNUM, BOARD_NO, BOARD_TITLE, MEMBER_NAME, BOARD_WRITE_DATE, READ_COUNT ,

			(SELECT COUNT(*) FROM "COMMENT" C WHERE C.BOARD_NO = B.BOARD_NO AND COMMENT_DEL_FL ='N') COMMENT_COUNT,
  
  
  	<![CDATA[

CASE 
   
   WHEN SYSDATE - BOARD_WRITE_DATE < 1 / 24 / 60 
   THEN FLOOR( (SYSDATE - BOARD_WRITE_DATE) * 24 * 60 * 60  ) || '초 전'
   
    WHEN SYSDATE - BOARD_WRITE_DATE < 1 / 24 
   THEN FLOOR( (SYSDATE - BOARD_WRITE_DATE) * 24 * 60  ) || '분 전'
   
   WHEN SYSDATE - BOARD_WRITE_DATE < 1  
   THEN FLOOR( (SYSDATE - BOARD_WRITE_DATE) * 24   ) || '시간 전'
   
   ELSE TO_CHAR(BOARD_WRITE_DATE, 'YYYY-MM-DD')
   
END BOARD_WRITE_DATE 
]]>

FROM BOARD B
JOIN MEMBER USING(MEMBER_NO)
WHERE BOARD_DEL_FL = 'N'
ORDER BY ROWNUM DESC
        	
        		
        </select>
   
</mapper>
